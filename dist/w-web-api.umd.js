/*!
 * w-web-api v1.0.34
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("path"),require("fs"),require("@hapi/hapi"),require("@hapi/inert"),require("events"),require("stream")):"function"==typeof define&&define.amd?define(["path","fs","@hapi/hapi","@hapi/inert","events","stream"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["w-web-api"]=t(e.path,e.fs,e["@hapi/hapi"],e["@hapi/inert"],e.events,e.stream)}(this,(function(e,t,n,r,o,a){"use strict";var i=Array.isArray,s="object"==typeof global&&global&&global.Object===Object&&global,u="object"==typeof self&&self&&self.Object===Object&&self,c=s||u||Function("return this")(),l=c.Symbol,f=Object.prototype,p=f.hasOwnProperty,d=f.toString,h=l?l.toStringTag:void 0;var m=Object.prototype.toString;var v="[object Null]",y="[object Undefined]",g=l?l.toStringTag:void 0;function b(e){return null==e?void 0===e?y:v:g&&g in Object(e)?function(e){var t=p.call(e,h),n=e[h];try{e[h]=void 0;var r=!0}catch(e){}var o=d.call(e);return r&&(t?e[h]=n:delete e[h]),o}(e):function(e){return m.call(e)}(e)}function w(e){return null!=e&&"object"==typeof e}var j="[object Symbol]";function O(e){return"symbol"==typeof e||w(e)&&b(e)==j}var S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/;function T(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!O(e))||(A.test(e)||!S.test(e)||null!=t&&e in Object(t))}function I(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var E="[object AsyncFunction]",_="[object Function]",k="[object GeneratorFunction]",B="[object Proxy]";function N(e){if(!I(e))return!1;var t=b(e);return t==_||t==k||t==E||t==B}var C,P=c["__core-js_shared__"],x=(C=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"";var R=Function.prototype.toString;function D(e){if(null!=e){try{return R.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var $=/^\[object .+?Constructor\]$/,G=Function.prototype,U=Object.prototype,M=G.toString,L=U.hasOwnProperty,F=RegExp("^"+M.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function W(e){return!(!I(e)||(t=e,x&&x in t))&&(N(e)?F:$).test(D(e));var t}function z(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return W(n)?n:void 0}var H=z(Object,"create");var Y=Object.prototype.hasOwnProperty;var q=Object.prototype.hasOwnProperty;function J(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function V(e,t){return e===t||e!=e&&t!=t}function Z(e,t){for(var n=e.length;n--;)if(V(e[n][0],t))return n;return-1}J.prototype.clear=function(){this.__data__=H?H(null):{},this.size=0},J.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},J.prototype.get=function(e){var t=this.__data__;if(H){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Y.call(t,e)?t[e]:void 0},J.prototype.has=function(e){var t=this.__data__;return H?void 0!==t[e]:q.call(t,e)},J.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=H&&void 0===t?"__lodash_hash_undefined__":t,this};var X=Array.prototype.splice;function K(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}K.prototype.clear=function(){this.__data__=[],this.size=0},K.prototype.delete=function(e){var t=this.__data__,n=Z(t,e);return!(n<0)&&(n==t.length-1?t.pop():X.call(t,n,1),--this.size,!0)},K.prototype.get=function(e){var t=this.__data__,n=Z(t,e);return n<0?void 0:t[n][1]},K.prototype.has=function(e){return Z(this.__data__,e)>-1},K.prototype.set=function(e,t){var n=this.__data__,r=Z(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Q=z(c,"Map");function ee(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}te.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(Q||K),string:new J}},te.prototype.delete=function(e){var t=ee(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return ee(this,e).get(e)},te.prototype.has=function(e){return ee(this,e).has(e)},te.prototype.set=function(e,t){var n=ee(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var ne="Expected a function";function re(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(ne);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=e.apply(this,r);return n.cache=a.set(o,i)||a,i};return n.cache=new(re.Cache||te),n}re.Cache=te;var oe,ae,ie,se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ue=/\\(\\)?/g,ce=(oe=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(se,(function(e,n,r,o){t.push(r?o.replace(ue,"$1"):n||e)})),t},ae=re(oe,(function(e){return 500===ie.size&&ie.clear(),e})),ie=ae.cache,ae),le=ce;function fe(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}var pe=1/0,de=l?l.prototype:void 0,he=de?de.toString:void 0;function me(e){if("string"==typeof e)return e;if(i(e))return fe(e,me)+"";if(O(e))return he?he.call(e):"";var t=e+"";return"0"==t&&1/e==-pe?"-0":t}function ve(e){return null==e?"":me(e)}function ye(e,t){return i(e)?e:T(e,t)?[e]:le(ve(e))}var ge=1/0;function be(e){if("string"==typeof e||O(e))return e;var t=e+"";return"0"==t&&1/e==-ge?"-0":t}function we(e,t){for(var n=0,r=(t=ye(t,e)).length;null!=e&&n<r;)e=e[be(t[n++])];return n&&n==r?e:void 0}function je(e,t,n){var r=null==e?void 0:we(e,t);return void 0===r?n:r}function Oe(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var Se,Ae=function(e,t,n){for(var r=-1,o=Object(e),a=n(e),i=a.length;i--;){var s=a[Se?i:++r];if(!1===t(o[s],s,o))break}return e};function Te(e){return w(e)&&"[object Arguments]"==b(e)}var Ie=Object.prototype,Ee=Ie.hasOwnProperty,_e=Ie.propertyIsEnumerable,ke=Te(function(){return arguments}())?Te:function(e){return w(e)&&Ee.call(e,"callee")&&!_e.call(e,"callee")},Be=ke;var Ne="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ce=Ne&&"object"==typeof module&&module&&!module.nodeType&&module,Pe=Ce&&Ce.exports===Ne?c.Buffer:void 0,xe=(Pe?Pe.isBuffer:void 0)||function(){return!1},Re=9007199254740991,De=/^(?:0|[1-9]\d*)$/;function $e(e,t){var n=typeof e;return!!(t=null==t?Re:t)&&("number"==n||"symbol"!=n&&De.test(e))&&e>-1&&e%1==0&&e<t}var Ge=9007199254740991;function Ue(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ge}var Me={};function Le(e){return function(t){return e(t)}}Me["[object Float32Array]"]=Me["[object Float64Array]"]=Me["[object Int8Array]"]=Me["[object Int16Array]"]=Me["[object Int32Array]"]=Me["[object Uint8Array]"]=Me["[object Uint8ClampedArray]"]=Me["[object Uint16Array]"]=Me["[object Uint32Array]"]=!0,Me["[object Arguments]"]=Me["[object Array]"]=Me["[object ArrayBuffer]"]=Me["[object Boolean]"]=Me["[object DataView]"]=Me["[object Date]"]=Me["[object Error]"]=Me["[object Function]"]=Me["[object Map]"]=Me["[object Number]"]=Me["[object Object]"]=Me["[object RegExp]"]=Me["[object Set]"]=Me["[object String]"]=Me["[object WeakMap]"]=!1;var Fe="object"==typeof exports&&exports&&!exports.nodeType&&exports,We=Fe&&"object"==typeof module&&module&&!module.nodeType&&module,ze=We&&We.exports===Fe&&s.process,He=function(){try{var e=We&&We.require&&We.require("util").types;return e||ze&&ze.binding&&ze.binding("util")}catch(e){}}(),Ye=He&&He.isTypedArray,qe=Ye?Le(Ye):function(e){return w(e)&&Ue(e.length)&&!!Me[b(e)]},Je=Object.prototype.hasOwnProperty;function Ve(e,t){var n=i(e),r=!n&&Be(e),o=!n&&!r&&xe(e),a=!n&&!r&&!o&&qe(e),s=n||r||o||a,u=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=u.length;for(var l in e)!t&&!Je.call(e,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||$e(l,c))||u.push(l);return u}var Ze=Object.prototype;function Xe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ze)}function Ke(e,t){return function(n){return e(t(n))}}var Qe=Ke(Object.keys,Object),et=Object.prototype.hasOwnProperty;function tt(e){if(!Xe(e))return Qe(e);var t=[];for(var n in Object(e))et.call(e,n)&&"constructor"!=n&&t.push(n);return t}function nt(e){return null!=e&&Ue(e.length)&&!N(e)}function rt(e){return nt(e)?Ve(e):tt(e)}var ot=function(e,t){return function(n,r){if(null==n)return n;if(!nt(n))return e(n,r);for(var o=n.length,a=t?o:-1,i=Object(n);(t?a--:++a<o)&&!1!==r(i[a],a,i););return n}}((function(e,t){return e&&Ae(e,t,rt)})),at=ot;function it(e){return e}function st(e,t){var n;return(i(e)?Oe:at)(e,"function"==typeof(n=t)?n:it)}function ut(e){return"[object String]"===Object.prototype.toString.call(e)}function ct(e){return!(!ut(e)||""===e)}function lt(e){if(!ct(e))return{};let t={};try{t=JSON.parse(e)}catch(e){t={}}return t}function ft(e){return"[object Object]"===Object.prototype.toString.call(e)}function pt(e){if(ft(e)){for(let t in e)return!0;return!1}return!1}function dt(e){return"[object Array]"===Object.prototype.toString.call(e)}function ht(e){return"[object Undefined]"===Object.prototype.toString.call(e)}function mt(e){if(ft(e)){for(let t in e)return!1;return!0}return!1}function vt(e){return e!=e}function yt(e){return!!ht(e)||(!!function(e){return"[object Null]"===Object.prototype.toString.call(e)}(e)||(!!mt(e)||(!!function(e){return!(!ut(e)||""!==e)}(e)||(!!function(e){return!!dt(e)&&0===e.length}(e)||!!vt(e)))))}function gt(e){return!!dt(e)&&(0!==e.length&&(1!==e.length||!yt(e[0])))}var bt=/\s/;var wt=/^\s+/;function jt(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&bt.test(e.charAt(t)););return t}(e)+1).replace(wt,""):e}var Ot=NaN,St=/^[-+]0x[0-9a-f]+$/i,At=/^0b[01]+$/i,Tt=/^0o[0-7]+$/i,It=parseInt;function Et(e){if("number"==typeof e)return e;if(O(e))return Ot;if(I(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=I(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=jt(e);var n=At.test(e);return n||Tt.test(e)?It(e.slice(2),n?2:8):St.test(e)?Ot:+e}var _t=1/0,kt=17976931348623157e292;function Bt(e){return e?(e=Et(e))===_t||e===-_t?(e<0?-1:1)*kt:e==e?e:0:0===e?e:0}function Nt(e){var t=Bt(e),n=t%1;return t==t?n?t-n:t:0}function Ct(e){let t=!1;if(ct(e))t=!isNaN(Number(e));else if(function(e){return"[object Number]"===Object.prototype.toString.call(e)}(e)){if(vt(e))return!1;t=!0}return t}function Pt(e){if(!Ct(e))return 0;return Bt(e)}function xt(e){return!!Ct(e)&&(e=Pt(e),"number"==typeof(t=e)&&t==Nt(t));var t}var Rt=c.isFinite,Dt=Math.min;var $t=function(e){var t=Math[e];return function(e,n){if(e=Et(e),(n=null==n?0:Dt(Nt(n),292))&&Rt(e)){var r=(ve(e)+"e").split("e");return+((r=(ve(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}("round"),Gt=$t;function Ut(e){if(!Ct(e))return 0;e=Pt(e);let t=Gt(e);return"0"===String(t)?0:t}function Mt(e){if(!xt(e))return!1;return Ut(e)>0}function Lt(e){let t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}function Ft(e){let t,n=Object.prototype.toString.call(e);if(t="[object Promise]"===n,t)return!0;if("[object Function]"!==n)return!1;try{t="function"!=typeof e.subscribe&&"function"==typeof e.then}catch(e){}return t}function Wt(e){if(!xt(e))return!1;return Ut(e)>=0}function zt(e,t){return ct(e)&&Wt(t)?0===(t=Ut(t))?"":e.substring(0,t):""}function Ht(e,t){if(!ct(e))return"";if(!Wt(t))return"";if(0===(t=Ut(t)))return"";let n=e.length-t;return n<0&&(n=0),e.substr(n,t)}function Yt(){let e,t,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return n.resolve=e,n.reject=t,n}let qt=function(e){if(!Lt(e))throw new Error("fn is not a function");return function(){let t=Yt(),n=null,r=null;try{n=e.apply(this,arguments)}catch(e){r=e}return null!==r?t.resolve({state:"error",msg:r}):Ft(n)?n.then((e=>{t.resolve({state:"success",msg:e})})).catch((e=>{"cancelled"===je(e,"reason")?t.resolve({state:"cancelled",msg:""}):t.resolve({state:"error",msg:e})})):t.resolve({state:"success",msg:n}),t}};var Jt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vt={};var Zt,Xt={},Kt={get exports(){return Xt},set exports(e){Xt=e}};function Qt(){return Zt||(Zt=1,function(e,t){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==Jt&&Jt.crypto&&(n=Jt.crypto),!n)try{n=require("crypto")}catch(e){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},i=a.lib={},s=i.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=i.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<o;a++){var i=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=i<<24-(r+a)%4*8}else for(var s=0;s<o;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new u.init(t,e)}}),c=a.enc={},l=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var a=t[o>>>2]>>>24-o%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},f=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var a=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},p=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,a=r.sigBytes,i=this.blockSize,s=a/(4*i),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,l=e.min(4*c,a);if(c){for(var f=0;f<c;f+=i)this._doProcessBlock(o,f);n=o.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=a.algo={};return a}(Math),n)}(Kt)),Xt}!function(e,t){e.exports=Qt().enc.Utf8}({get exports(){return Vt},set exports(e){Vt=e}});var en=Vt,tn={};!function(e,t){var n;e.exports=(n=Qt(),function(){var e=n,t=e.lib.WordArray;function r(e,n,r){for(var o=[],a=0,i=0;i<n;i++)if(i%4){var s=r[e.charCodeAt(i-1)]<<i%4*2|r[e.charCodeAt(i)]>>>6-i%4*2;o[a>>>2]|=s<<24-a%4*8,a++}return t.create(o,a)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],a=0;a<n;a+=3)for(var i=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)o.push(r.charAt(i>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<n.length;a++)o[n.charCodeAt(a)]=a}var i=n.charAt(64);if(i){var s=e.indexOf(i);-1!==s&&(t=s)}return r(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}({get exports(){return tn},set exports(e){tn=e}});var nn=tn;function rn(e){if(!ct(e))return"";return nn.parse(e).toString(en)}function on(e){return!!t.existsSync(e)&&(!t.lstatSync(e).isDirectory()&&!t.lstatSync(e).isSymbolicLink())}function an(e,t,n){if(!ct(e))return"";if(!ct(t))return"";if(!ut(n))return"";return String(e).replaceAll(t,n)}var sn="[object Boolean]";function un(e){return!0===(t=e)||!1===t||w(t)&&b(t)==sn;var t}var cn={};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,a||e,i),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,i=new Array(a);o<a;o++)i[o]=r[o].fn;return i},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,o,a,i){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,a),!0;case 6:return l.fn.call(l.context,t,r,o,a,i),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,o);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,o){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return i(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||i(this,a);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||o&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[a]=1===c.length?c[0]:c:i(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}({get exports(){return cn},set exports(e){cn=e}});var ln=cn;function fn(){return new ln}function pn(e){var t=this.__data__=new K(e);this.size=t.size}pn.prototype.clear=function(){this.__data__=new K,this.size=0},pn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},pn.prototype.get=function(e){return this.__data__.get(e)},pn.prototype.has=function(e){return this.__data__.has(e)},pn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof K){var r=n.__data__;if(!Q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(e,t),this.size=n.size,this};function dn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new te;++t<n;)this.add(e[t])}function hn(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function mn(e,t){return e.has(t)}dn.prototype.add=dn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},dn.prototype.has=function(e){return this.__data__.has(e)};var vn=1,yn=2;function gn(e,t,n,r,o,a){var i=n&vn,s=e.length,u=t.length;if(s!=u&&!(i&&u>s))return!1;var c=a.get(e),l=a.get(t);if(c&&l)return c==t&&l==e;var f=-1,p=!0,d=n&yn?new dn:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var h=e[f],m=t[f];if(r)var v=i?r(m,h,f,t,e,a):r(h,m,f,e,t,a);if(void 0!==v){if(v)continue;p=!1;break}if(d){if(!hn(t,(function(e,t){if(!mn(d,t)&&(h===e||o(h,e,n,r,a)))return d.push(t)}))){p=!1;break}}else if(h!==m&&!o(h,m,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}var bn=c.Uint8Array;function wn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function jn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var On=1,Sn=2,An="[object Boolean]",Tn="[object Date]",In="[object Error]",En="[object Map]",_n="[object Number]",kn="[object RegExp]",Bn="[object Set]",Nn="[object String]",Cn="[object Symbol]",Pn="[object ArrayBuffer]",xn="[object DataView]",Rn=l?l.prototype:void 0,Dn=Rn?Rn.valueOf:void 0;function $n(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function Gn(e,t,n){var r=t(e);return i(e)?r:$n(r,n(e))}function Un(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}function Mn(){return[]}var Ln=Object.prototype.propertyIsEnumerable,Fn=Object.getOwnPropertySymbols,Wn=Fn?function(e){return null==e?[]:(e=Object(e),Un(Fn(e),(function(t){return Ln.call(e,t)})))}:Mn;function zn(e){return Gn(e,rt,Wn)}var Hn=1,Yn=Object.prototype.hasOwnProperty;var qn=z(c,"DataView"),Jn=z(c,"Promise"),Vn=z(c,"Set"),Zn=z(c,"WeakMap"),Xn="[object Map]",Kn="[object Promise]",Qn="[object Set]",er="[object WeakMap]",tr="[object DataView]",nr=D(qn),rr=D(Q),or=D(Jn),ar=D(Vn),ir=D(Zn),sr=b;(qn&&sr(new qn(new ArrayBuffer(1)))!=tr||Q&&sr(new Q)!=Xn||Jn&&sr(Jn.resolve())!=Kn||Vn&&sr(new Vn)!=Qn||Zn&&sr(new Zn)!=er)&&(sr=function(e){var t=b(e),n="[object Object]"==t?e.constructor:void 0,r=n?D(n):"";if(r)switch(r){case nr:return tr;case rr:return Xn;case or:return Kn;case ar:return Qn;case ir:return er}return t});var ur=sr,cr=1,lr="[object Arguments]",fr="[object Array]",pr="[object Object]",dr=Object.prototype.hasOwnProperty;function hr(e,t,n,r,o,a){var s=i(e),u=i(t),c=s?fr:ur(e),l=u?fr:ur(t),f=(c=c==lr?pr:c)==pr,p=(l=l==lr?pr:l)==pr,d=c==l;if(d&&xe(e)){if(!xe(t))return!1;s=!0,f=!1}if(d&&!f)return a||(a=new pn),s||qe(e)?gn(e,t,n,r,o,a):function(e,t,n,r,o,a,i){switch(n){case xn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Pn:return!(e.byteLength!=t.byteLength||!a(new bn(e),new bn(t)));case An:case Tn:case _n:return V(+e,+t);case In:return e.name==t.name&&e.message==t.message;case kn:case Nn:return e==t+"";case En:var s=wn;case Bn:var u=r&On;if(s||(s=jn),e.size!=t.size&&!u)return!1;var c=i.get(e);if(c)return c==t;r|=Sn,i.set(e,t);var l=gn(s(e),s(t),r,o,a,i);return i.delete(e),l;case Cn:if(Dn)return Dn.call(e)==Dn.call(t)}return!1}(e,t,c,n,r,o,a);if(!(n&cr)){var h=f&&dr.call(e,"__wrapped__"),m=p&&dr.call(t,"__wrapped__");if(h||m){var v=h?e.value():e,y=m?t.value():t;return a||(a=new pn),o(v,y,n,r,a)}}return!!d&&(a||(a=new pn),function(e,t,n,r,o,a){var i=n&Hn,s=zn(e),u=s.length;if(u!=zn(t).length&&!i)return!1;for(var c=u;c--;){var l=s[c];if(!(i?l in t:Yn.call(t,l)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var d=!0;a.set(e,t),a.set(t,e);for(var h=i;++c<u;){var m=e[l=s[c]],v=t[l];if(r)var y=i?r(v,m,l,t,e,a):r(m,v,l,e,t,a);if(!(void 0===y?m===v||o(m,v,n,r,a):y)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var g=e.constructor,b=t.constructor;g==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b||(d=!1)}return a.delete(e),a.delete(t),d}(e,t,n,r,o,a))}function mr(e,t,n,r,o){return e===t||(null==e||null==t||!w(e)&&!w(t)?e!=e&&t!=t:hr(e,t,n,r,mr,o))}var vr=1,yr=2;function gr(e){return e==e&&!I(e)}function br(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function wr(e){var t=function(e){for(var t=rt(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,gr(o)]}return t}(e);return 1==t.length&&t[0][2]?br(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var o=n.length,a=o,i=!r;if(null==e)return!a;for(e=Object(e);o--;){var s=n[o];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<a;){var u=(s=n[o])[0],c=e[u],l=s[1];if(i&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=new pn;if(r)var p=r(c,l,u,e,t,f);if(!(void 0===p?mr(l,c,vr|yr,r,f):p))return!1}}return!0}(n,e,t)}}function jr(e,t){return null!=e&&t in Object(e)}function Or(e,t){return null!=e&&function(e,t,n){for(var r=-1,o=(t=ye(t,e)).length,a=!1;++r<o;){var s=be(t[r]);if(!(a=null!=e&&n(e,s)))break;e=e[s]}return a||++r!=o?a:!!(o=null==e?0:e.length)&&Ue(o)&&$e(s,o)&&(i(e)||Be(e))}(e,t,jr)}var Sr=1,Ar=2;function Tr(e){return function(t){return null==t?void 0:t[e]}}function Ir(e){return T(e)?Tr(be(e)):function(e){return function(t){return we(t,e)}}(e)}function Er(e){return"function"==typeof e?e:null==e?it:"object"==typeof e?i(e)?function(e,t){return T(e)&&gr(t)?br(be(e),t):function(n){var r=je(n,e);return void 0===r&&r===t?Or(n,e):mr(t,r,Sr|Ar)}}(e[0],e[1]):wr(e):Ir(e)}function _r(e,t){var n=-1,r=nt(e)?Array(e.length):[];return at(e,(function(e,o,a){r[++n]=t(e,o,a)})),r}function kr(e,t){return(i(e)?fe:_r)(e,Er(t))}var Br=function(){try{var e=z(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Nr=Br;function Cr(e,t,n){"__proto__"==t&&Nr?Nr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Pr=Object.prototype.hasOwnProperty;function xr(e,t,n){var r=e[t];Pr.call(e,t)&&V(r,n)&&(void 0!==n||t in e)||Cr(e,t,n)}function Rr(e,t,n,r){var o=!n;n||(n={});for(var a=-1,i=t.length;++a<i;){var s=t[a],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),o?Cr(n,s,u):xr(n,s,u)}return n}var Dr=Object.prototype.hasOwnProperty;function $r(e){if(!I(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Xe(e),n=[];for(var r in e)("constructor"!=r||!t&&Dr.call(e,r))&&n.push(r);return n}function Gr(e){return nt(e)?Ve(e,!0):$r(e)}var Ur="object"==typeof exports&&exports&&!exports.nodeType&&exports,Mr=Ur&&"object"==typeof module&&module&&!module.nodeType&&module,Lr=Mr&&Mr.exports===Ur?c.Buffer:void 0,Fr=Lr?Lr.allocUnsafe:void 0;function Wr(e,t){if(t)return e.slice();var n=e.length,r=Fr?Fr(n):new e.constructor(n);return e.copy(r),r}function zr(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Hr=Ke(Object.getPrototypeOf,Object),Yr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)$n(t,Wn(e)),e=Hr(e);return t}:Mn,qr=Yr;function Jr(e){return Gn(e,Gr,qr)}var Vr=Object.prototype.hasOwnProperty;function Zr(e){var t=new e.constructor(e.byteLength);return new bn(t).set(new bn(e)),t}var Xr=/\w*$/;var Kr=l?l.prototype:void 0,Qr=Kr?Kr.valueOf:void 0;function eo(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var to="[object Boolean]",no="[object Date]",ro="[object Map]",oo="[object Number]",ao="[object RegExp]",io="[object Set]",so="[object String]",uo="[object Symbol]",co="[object ArrayBuffer]",lo="[object DataView]",fo="[object Float32Array]",po="[object Float64Array]",ho="[object Int8Array]",mo="[object Int16Array]",vo="[object Int32Array]",yo="[object Uint8Array]",go="[object Uint8ClampedArray]",bo="[object Uint16Array]",wo="[object Uint32Array]";function jo(e,t,n){var r,o=e.constructor;switch(t){case co:return Zr(e);case to:case no:return new o(+e);case lo:return function(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case fo:case po:case ho:case mo:case vo:case yo:case go:case bo:case wo:return eo(e,n);case ro:return new o;case oo:case so:return new o(e);case ao:return function(e){var t=new e.constructor(e.source,Xr.exec(e));return t.lastIndex=e.lastIndex,t}(e);case io:return new o;case uo:return r=e,Qr?Object(Qr.call(r)):{}}}var Oo=Object.create,So=function(){function e(){}return function(t){if(!I(t))return{};if(Oo)return Oo(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Ao=So;function To(e){return"function"!=typeof e.constructor||Xe(e)?{}:Ao(Hr(e))}var Io=He&&He.isMap,Eo=Io?Le(Io):function(e){return w(e)&&"[object Map]"==ur(e)};var _o=He&&He.isSet,ko=_o?Le(_o):function(e){return w(e)&&"[object Set]"==ur(e)},Bo=1,No=2,Co=4,Po="[object Arguments]",xo="[object Function]",Ro="[object GeneratorFunction]",Do="[object Object]",$o={};function Go(e,t,n,r,o,a){var s,u=t&Bo,c=t&No,l=t&Co;if(n&&(s=o?n(e,r,o,a):n(e)),void 0!==s)return s;if(!I(e))return e;var f=i(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Vr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return zr(e,s)}else{var p=ur(e),d=p==xo||p==Ro;if(xe(e))return Wr(e,u);if(p==Do||p==Po||d&&!o){if(s=c||d?{}:To(e),!u)return c?function(e,t){return Rr(e,qr(e),t)}(e,function(e,t){return e&&Rr(t,Gr(t),e)}(s,e)):function(e,t){return Rr(e,Wn(e),t)}(e,function(e,t){return e&&Rr(t,rt(t),e)}(s,e))}else{if(!$o[p])return o?e:{};s=jo(e,p,u)}}a||(a=new pn);var h=a.get(e);if(h)return h;a.set(e,s),ko(e)?e.forEach((function(r){s.add(Go(r,t,n,r,e,a))})):Eo(e)&&e.forEach((function(r,o){s.set(o,Go(r,t,n,o,e,a))}));var m=f?void 0:(l?c?Jr:zn:c?Gr:rt)(e);return Oe(m||e,(function(r,o){m&&(r=e[o=r]),xr(s,o,Go(r,t,n,o,e,a))})),s}$o[Po]=$o["[object Array]"]=$o["[object ArrayBuffer]"]=$o["[object DataView]"]=$o["[object Boolean]"]=$o["[object Date]"]=$o["[object Float32Array]"]=$o["[object Float64Array]"]=$o["[object Int8Array]"]=$o["[object Int16Array]"]=$o["[object Int32Array]"]=$o["[object Map]"]=$o["[object Number]"]=$o[Do]=$o["[object RegExp]"]=$o["[object Set]"]=$o["[object String]"]=$o["[object Symbol]"]=$o["[object Uint8Array]"]=$o["[object Uint8ClampedArray]"]=$o["[object Uint16Array]"]=$o["[object Uint32Array]"]=!0,$o["[object Error]"]=$o[xo]=$o["[object WeakMap]"]=!1;var Uo=1,Mo=4;function Lo(e){return Go(e,Uo|Mo)}var Fo="[object String]";var Wo=Tr("length"),zo=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Ho(e){return zo.test(e)}var Yo="\\ud800-\\udfff",qo="["+Yo+"]",Jo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Vo="\\ud83c[\\udffb-\\udfff]",Zo="[^"+Yo+"]",Xo="(?:\\ud83c[\\udde6-\\uddff]){2}",Ko="[\\ud800-\\udbff][\\udc00-\\udfff]",Qo="(?:"+Jo+"|"+Vo+")"+"?",ea="[\\ufe0e\\ufe0f]?",ta=ea+Qo+("(?:\\u200d(?:"+[Zo,Xo,Ko].join("|")+")"+ea+Qo+")*"),na="(?:"+[Zo+Jo+"?",Jo,Xo,Ko,qo].join("|")+")",ra=RegExp(Vo+"(?="+Vo+")|"+na+ta,"g");function oa(e){return Ho(e)?function(e){for(var t=ra.lastIndex=0;ra.test(e);)++t;return t}(e):Wo(e)}var aa="[object Map]",ia="[object Set]";function sa(e){if(null==e)return 0;if(nt(e))return"string"==typeof(t=e)||!i(t)&&w(t)&&b(t)==Fo?oa(e):e.length;var t,n=ur(e);return n==aa||n==ia?e.size:tt(e).length}function ua(e,t){return!!ft(e)&&(!(!ct(t)&&!Ct(t))&&t in e)}function ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=fn(),n={},r=null,o=je(e,"timeAlive");Mt(o)||(o=1e4),o=Ut(o);let a=je(e,"timeDetect");return Mt(a)||(a=50),a=Ut(a),t.trigger=function(e,i){ct(e)?(ua(n,e)||setTimeout((()=>{t.emit("message",{eventName:"enter",key:e,data:i,now:sa(n)})}),1),n[e]={data:i,time:Date.now()},null===r&&(r=setInterval((()=>{st(n,((e,r)=>{if(Date.now()-e.time>o){let e=Lo(n[r]);delete n[r],t.emit("message",{eventName:"leave",key:r,data:e.data,now:sa(n)})}})),pt(n)||(clearInterval(r),r=null)}),a))):console.log("trigger need key")},t.get=function(){let e=[];return st(n,((t,n)=>{e.push({key:n,data:t.data})})),e=Lo(e),e},t}function la(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function fa(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function pa(e){return"[object Uint16Array]"===Object.prototype.toString.call(e)}function da(e){if(!(la(e)||(t=e,"[object Blob]"===Object.prototype.toString.call(t))||fa(e)||pa(e)))return null;var t;try{if(e.byteLength)return e.byteLength}catch(e){}try{if(e.length)return e.length}catch(e){}try{if(e.size)return e.size}catch(e){}return null}var ha="[object Object]",ma=Function.prototype,va=Object.prototype,ya=ma.toString,ga=va.hasOwnProperty,ba=ya.call(Object);function wa(e){if(!w(e)||b(e)!=ha)return!1;var t=Hr(e);if(null===t)return!0;var n=ga.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ya.call(n)==ba}var ja="[object DOMException]",Oa="[object Error]";function Sa(e){if(!ft(e))return{results:"",binarys:[]};if(mt(e))return{results:"",binarys:[]};let t="",n=[];try{let r=-1;t=JSON.stringify(e,(function(e,t){if(fa(t)){r+=1;let e=`[Uint8Array]::${r}`;return n.push(t),e}if(pa(t)){r+=1;let e=`[Uint16Array]::${r}`;return n.push(t),e}if(la(t)){r+=1;let e=`[ArrayBuffer]::${r}`;return n.push(t),e}return function(e){if(!w(e))return!1;var t=b(e);return t==Oa||t==ja||"string"==typeof e.message&&"string"==typeof e.name&&!wa(e)}(t)&&(t=t.toString()),t}))}catch(e){}return{results:t,binarys:n}}function Aa(e){if(!ct(e))return new Uint8Array;let t;try{t=function(e){if(!ut(e))return new Uint8Array;let t=nn.parse(e),n=t.words,r=t.sigBytes,o=new Uint8Array(r);for(let e=0;e<r;e++){let t=n[e>>>2]>>>24-e%4*8&255;o[e]=t}return o}(function(e){if(!ct(e))return"";let t=en.parse(e);return nn.stringify(t)}(e))}catch(e){return new Uint8Array}return t}function Ta(e,t){return function(e,t,n,r,o,a){if(!Ct(e))return null;if(!fa(t))return null;if(!xt(n))return null;if(!un(r))return null;if(!xt(o))return null;if(!xt(a))return null;let i,s,u;e=Pt(e);let c=8*a-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?a-1:0,h=r?-1:1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,i=l):(i=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-i))<1&&(i--,u*=2),(e+=i+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(i++,u/=2),i+f>=l?(s=0,i=l):i+f>=1?(s=(e*u-1)*Math.pow(2,o),i+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),i=0));o>=8;t[n+d]=255&s,d+=h,s/=256,o-=8);for(i=i<<o|s,c+=o;c>0;t[n+d]=255&i,d+=h,i/=256,c-=8);return t[n+d-h]|=128*m,null}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4&&void 0!==arguments[4]?arguments[4]:52,arguments.length>5&&void 0!==arguments[5]?arguments[5]:8)}function Ia(e){let t=[],n=[];if(!gt(e)&&!pt(e))return null;let r=[],o=[];function a(e){r.push(da(e)),o.push(e)}try{let i=Sa(e);a(Aa(i.results)),st(i.binarys,(e=>{a(e)}));let s=r,u=Aa(JSON.stringify(s)),c=new Uint8Array(8);Ta(da(u),c),t.push(c),t.push(u),st(o,(e=>{t.push(e)})),st(t,(e=>{n=function(e,t){let n=da(e),r=da(t),o=new Uint8Array(n+r);return o.set(new Uint8Array(e),0),o.set(new Uint8Array(t),n),o}(n,e)}))}catch(e){return null}return n}function Ea(e){return function(e,t,n,r,o){if(!fa(e))return null;if(!xt(t))return null;if(!un(n))return null;if(!xt(r))return null;if(!xt(o))return null;let a,i,s=8*o-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?0:o-1,p=n?1:-1,d=e[t+f];for(f+=p,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=p,l-=8);for(i=a&(1<<-l)-1,a>>=-l,l+=r;l>0;i=256*i+e[t+f],f+=p,l-=8);if(0===a)a=1-c;else{if(a===u)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,r),a-=c}return(d?-1:1)*i*Math.pow(2,a-r)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:52,arguments.length>4&&void 0!==arguments[4]?arguments[4]:8)}var _a={};!function(e,t){var n;e.exports=(n=Qt(),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],o=0;o<n;o++)r[o>>>2]|=e[o]<<24-o%4*8;t.call(this,r,n)}else t.apply(this,arguments)};r.prototype=e}}(),n.lib.WordArray)}({get exports(){return _a},set exports(e){_a=e}});var ka=_a;function Ba(e){if(!fa(e))return"";let t;try{t=rn(function(e){return fa(e)?ka.create(e).toString(nn):""}(e))}catch(e){return""}return t}function Na(e){let t=null;if(!fa(e))return null;try{let n=8,r=e.slice(0,n),o=e.slice(n,da(e)),a=Ea(r),i=o.slice(0,a),s=o.slice(a,da(o)),u=Ba(i),c=function(e,t){let n=0,r=0,o=[];return st(t,(t=>{r=n+t;let a=e.slice(n,r);n=r,o.push(a)})),o}(s,JSON.parse(u));t=function(e){if(!pt(e))return{};let{results:t,binarys:n}=e;if(!ct(t))return{};if(!dt(n))return{};let r={};try{r=JSON.parse(t,(function(e,t){if(ct(t)){if(t.indexOf("[Uint8Array]::")>=0){let e=Ut(t.replace("[Uint8Array]::",""));return n[e]}if(t.indexOf("[Uint16Array]::")>=0){let e=Ut(t.replace("[Uint16Array]::",""));return n[e]}if(t.indexOf("[ArrayBuffer]::")>=0){let e=Ut(t.replace("[ArrayBuffer]::",""));return n[e]}}return t}))}catch(e){}return r}({results:Ba(c.shift()),binarys:c})}catch(e){}return t}function Ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};e.port||(e.port=8080),e.apiName||(e.apiName="api");let i,s=new o.EventEmitter,u=ca();function c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];setTimeout((()=>{s.emit(e,...n)}),1)}async function l(e){let n=Yt(),r=Yt(),o=je(e,"_mode","");if(r.then((t=>{e.output=t,delete e.input,n.resolve(e)})).catch((e=>{n.reject(e)})),"execute"===o){c("execute",je(e,"func",""),je(e,"input",null),r)}else if("broadcast"===o){c("broadcast",je(e,"input",null)),r.resolve("ok")}else if("deliver"===o){c("deliver",je(e,"input",null)),r.resolve("ok")}else if("polling"===o){let n=je(e,"clientId",""),o=je(t,n,[]);o=Lo(o),t[n]=[],r.resolve(o)}else{let t="can not find _mode in data";!function(e,t){c("error",{msg:e,err:t})}(t,e),n.reject(t),r.reject()}return n}setInterval((()=>{let e=kr(u.get(),"key"),n={};st(e,(e=>{n[e]=je(t,e,[])})),t=n}),1e3),i=e.serverHapi?e.serverHapi:n.server({port:e.port,routes:{cors:{origin:["*"]}}}),c("open"),u.on("message",(function(e){let{eventName:t,key:n,data:r,now:o}=e;"enter"===t?c("clientEnter",n,r):"leave"===t&&c("clientLeave",n,r),c("clientChange",o)}));let f={path:"/"+e.apiName,method:"POST",options:{payload:{maxBytes:1073741824,timeout:18e4,multipart:!0},timeout:{socket:3e5}},handler:async function(e,t){let n=je(e,"headers");n=pt(n)?n:"";let r=je(e,"query");r=pt(r)?r:"",c("handler",{headers:n,query:r});let o=je(e,"payload.bb",null);ut(o)&&(o=Buffer.from(o,"utf8"));let i=Na(new Uint8Array(o)),s=je(i,"clientId"),f={headers:e.headers,info:e.info};u.trigger(s,f);let p={};await l(i).then((function(e){p.success=e})).catch((function(e){p.error=e}));let d=Ia(p),h=new a.Readable;return h._read=()=>{},h.push(d),h.push(null),t.response(h).header("Cache-Control","no-cache, no-store, must-revalidate").header("Content-Type","application/octet-stream").header("Content-Length",h.readableLength)}};return s.broadcast=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(yt(t))return;let r={};st(t,((t,n)=>{t.push({mode:"broadcast",data:e}),r[n]=t})),t=r,n(100)},s.deliver=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=je(t,e,[]);o.push({mode:"deliver",data:n}),t[e]=o,r(100)},e.serverHapi?e.serverHapi.route(f):async function(){await i.register(r),i.route([{method:"GET",path:"/{file*}",handler:{directory:{path:"./"}}},f]),await i.start(),console.log(`Server running at: ${i.info.uri}`)}(),s}let Pa="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),xa=Pa.length;function Ra(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=[];e=Mt(e)?Ut(e):32;for(let n=0;n<e;n++)t[n]=Pa[0|Math.random()*xa];return t.join("")}var Da=function(){return c.Date.now()},$a="Expected a function",Ga=Math.max,Ua=Math.min;function Ma(e,t,n){var r,o,a,i,s,u,c=0,l=!1,f=!1,p=!0;if("function"!=typeof e)throw new TypeError($a);function d(t){var n=r,a=o;return r=o=void 0,c=t,i=e.apply(a,n)}function h(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-c>=a}function m(){var e=Da();if(h(e))return v(e);s=setTimeout(m,function(e){var n=t-(e-u);return f?Ua(n,a-(e-c)):n}(e))}function v(e){return s=void 0,p&&r?d(e):(r=o=void 0,i)}function y(){var e=Da(),n=h(e);if(r=arguments,o=this,u=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),l?d(e):i}(u);if(f)return clearTimeout(s),s=setTimeout(m,t),d(u)}return void 0===s&&(s=setTimeout(m,t)),i}return t=Et(t)||0,I(n)&&(l=!!n.leading,a=(f="maxWait"in n)?Ga(Et(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=o=s=void 0},y.flush=function(){return void 0===s?i:v(Da())},y}function La(e,t,n){(void 0!==n&&!V(e[t],n)||void 0===n&&!(t in e))&&Cr(e,t,n)}function Fa(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Wa(e,t,n,r,o,a,s){var u=Fa(e,n),c=Fa(t,n),l=s.get(c);if(l)La(e,n,l);else{var f,p=a?a(u,c,n+"",e,t,s):void 0,d=void 0===p;if(d){var h=i(c),m=!h&&xe(c),v=!h&&!m&&qe(c);p=c,h||m||v?i(u)?p=u:w(f=u)&&nt(f)?p=zr(u):m?(d=!1,p=Wr(c,!0)):v?(d=!1,p=eo(c,!0)):p=[]:wa(c)||Be(c)?(p=u,Be(u)?p=function(e){return Rr(e,Gr(e))}(u):I(u)&&!N(u)||(p=To(c))):d=!1}d&&(s.set(c,p),o(p,c,r,a,s),s.delete(c)),La(e,n,p)}}function za(e,t,n,r,o){e!==t&&Ae(t,(function(a,i){if(o||(o=new pn),I(a))Wa(e,t,i,n,za,r,o);else{var s=r?r(Fa(e,i),a,i+"",e,t,o):void 0;void 0===s&&(s=a),La(e,i,s)}}),Gr)}var Ha=Math.max;var Ya=Nr?function(e,t){return Nr(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:it,qa=Ya,Ja=Date.now;var Va=function(e){var t=0,n=0;return function(){var r=Ja(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(qa),Za=Va;function Xa(e,t){return Za(function(e,t,n){return t=Ha(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=Ha(r.length-t,0),i=Array(a);++o<a;)i[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(i),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,it),e+"")}var Ka,Qa=(Ka=function(e,t,n){za(e,t,n)},Xa((function(e,t){var n=-1,r=t.length,o=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(o=Ka.length>3&&"function"==typeof o?(r--,o):void 0,a&&function(e,t,n){if(!I(n))return!1;var r=typeof t;return!!("number"==r?nt(n)&&$e(t,n.length):"string"==r&&t in n)&&V(n[t],e)}(t[0],t[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var i=t[n];i&&Ka(e,i,n,o)}return e}))),ei={};!function(e,t){e.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",o="second",a="minute",i="hour",s="day",u="week",c="month",l="quarter",f="year",p="date",d="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},g={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,c),a=n-o<0,i=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-o)/(a?o-i:i-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:f,w:u,d:s,D:p,h:i,m:a,s:o,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",w={};w[b]=v;var j="$isDayjsObject",O=function(e){return e instanceof I||!(!e||!e[j])},S=function e(t,n,r){var o;if(!t)return b;if("string"==typeof t){var a=t.toLowerCase();w[a]&&(o=a),n&&(w[a]=n,o=a);var i=t.split("-");if(!o&&i.length>1)return e(i[0])}else{var s=t.name;w[s]=t,o=s}return!r&&o&&(b=o),o||!r&&b},A=function(e,t){if(O(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new I(n)},T=g;T.l=S,T.i=O,T.w=function(e,t){return A(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var I=function(){function v(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[j]=!0}var y=v.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var o=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return T},y.isValid=function(){return!(this.$d.toString()===d)},y.isSame=function(e,t){var n=A(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return A(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<A(e)},y.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!T.u(t)||t,l=T.p(e),d=function(e,t){var o=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?o:o.endOf(s)},h=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,v=this.$M,y=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case f:return r?d(1,0):d(31,11);case c:return r?d(1,v):d(0,v+1);case u:var b=this.$locale().weekStart||0,w=(m<b?m+7:m)-b;return d(r?y-w:y+(6-w),v);case s:case p:return h(g+"Hours",0);case i:return h(g+"Minutes",1);case a:return h(g+"Seconds",2);case o:return h(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,u=T.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[s]=l+"Date",n[p]=l+"Date",n[c]=l+"Month",n[f]=l+"FullYear",n[i]=l+"Hours",n[a]=l+"Minutes",n[o]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],h=u===s?this.$D+(t-this.$W):t;if(u===c||u===f){var m=this.clone().set(p,1);m.$d[d](h),m.init(),this.$d=m.set(p,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](h);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[T.p(e)]()},y.add=function(r,l){var p,d=this;r=Number(r);var h=T.p(l),m=function(e){var t=A(d);return T.w(t.date(t.date()+Math.round(e*r)),d)};if(h===c)return this.set(c,this.$M+r);if(h===f)return this.set(f,this.$y+r);if(h===s)return m(1);if(h===u)return m(7);var v=(p={},p[a]=t,p[i]=n,p[o]=e,p)[h]||1,y=this.$d.getTime()+r*v;return T.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=T.z(this),a=this.$H,i=this.$m,s=this.$M,u=n.weekdays,c=n.months,l=n.meridiem,f=function(e,n,o,a){return e&&(e[n]||e(t,r))||o[n].slice(0,a)},p=function(e){return T.s(a%12||12,e,"0")},h=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(m,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return T.s(t.$y,4,"0");case"M":return s+1;case"MM":return T.s(s+1,2,"0");case"MMM":return f(n.monthsShort,s,c,3);case"MMMM":return f(c,s);case"D":return t.$D;case"DD":return T.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return f(n.weekdaysMin,t.$W,u,2);case"ddd":return f(n.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(a);case"HH":return T.s(a,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return h(a,i,!0);case"A":return h(a,i,!1);case"m":return String(i);case"mm":return T.s(i,2,"0");case"s":return String(t.$s);case"ss":return T.s(t.$s,2,"0");case"SSS":return T.s(t.$ms,3,"0");case"Z":return o}return null}(e)||o.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,p,d){var h,m=this,v=T.p(p),y=A(r),g=(y.utcOffset()-this.utcOffset())*t,b=this-y,w=function(){return T.m(m,y)};switch(v){case f:h=w()/12;break;case c:h=w();break;case l:h=w()/3;break;case u:h=(b-g)/6048e5;break;case s:h=(b-g)/864e5;break;case i:h=b/n;break;case a:h=b/t;break;case o:h=b/e;break;default:h=b}return d?h:T.a(h)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return w[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return T.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),E=I.prototype;return A.prototype=E,[["$ms",r],["$s",o],["$m",a],["$H",i],["$W",s],["$M",c],["$y",f],["$D",p]].forEach((function(e){E[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),A.extend=function(e,t){return e.$i||(e(t,I,A),e.$i=!0),A},A.locale=S,A.isDayjs=O,A.unix=function(e){return A(1e3*e)},A.en=w[b],A.Ls=w,A.p={},A}()}({get exports(){return ei},set exports(e){ei=e}});var ti=ei;let ni=e.resolve();function ri(){let e={},n=je(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"fnTableTags");ct(n)||(n="tableTags.json"),n=`${ni}/${n}`;let r=fn();function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];setTimeout((()=>{r.emit(e,...n)}),1)}function a(){let e={};try{if(t.existsSync(n)){let r=lt(t.readFileSync(n,"utf8"));pt(r)&&(e=r)}}catch(e){o("error",{msg:"readTableTags catch",err:e})}return e}function i(){try{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ht(e))return"";let n="";try{n=t?JSON.stringify(e,null,2):JSON.stringify(e)}catch(e){n=""}return n}(e);t.writeFileSync(n,r,"utf8")}catch(e){o("error",{msg:"writeTableTags catch",err:e})}}let s=Ma((()=>{i(),o("changeTableTags",e)}),200);return r.readTableTags=a,r.writeTableTags=i,r.initTableTags=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"useInputFirst";e="useStorageFirst"===n?Qa(t,a()):"useInputOnly"===n?t:"useStorageOnly"===n?a():Qa(a(),t),i()},r.setTableTags=function(){e=Qa(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),i()},r.getTableTags=function(){return e},r.updateTableTag=function(t){e[t]=function(){if(!Lt(ti))throw new Error("invalid dayjs");return ti().format("YYYY-MM-DDTHH:mm:ssZ")}()+"|"+Ra(6),s()},r}function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=fn(),n=je(e,"instWConverServer",null);if(null===n)return t.emit("error","invalid opt.instWConverServer"),t;let r=je(e,"dbORMs",null);if(!ft(r))return t.emit("error","invalid opt.dbORMs"),t;let o=je(e,"tableNames",null);if(!dt(o))return t.emit("error","invalid opt.tableNames"),t;0===sa(o)&&console.log("opt.tableNames.lenght = 0");let a=je(e,"fnTableTags",null);ct(a)||(a="tableTags.json");let i=new ri({fnTableTags:a});o=Lo(o);let s={};function u(e){let t={};return st(o,(n=>{let r=n,o=e[n];t[r]=o})),t}return st(o,(e=>{s[e]=Ra(6)})),i.initTableTags(s,"useInputOnly"),st(o,(e=>{let t=r[e];if(!t)throw new Error(`invalid dbORMs.${e}`);t.on("change",(()=>{i.updateTableTag(e)}))})),n.on("clientEnter",(function(e,t){n.deliver(e,{mode:"syncTable",data:i.readTableTags()})})),i.on("changeTableTags",(e=>{n.broadcast({mode:"syncTable",data:u(e)})})),i}function ai(e){return ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ai(e)}function ii(e){var t=function(e,t){if("object"!==ai(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ai(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ai(t)?t:String(t)}function si(e,t,n){return(t=ii(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(n),!0).forEach((function(t){si(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let li={},fi=null;async function pi(e){let{func:t,input:n,pm:r}=e,o="";if(!ua(n,"__sysToken__"))return r.resolve({state:"error",msg:"invalid token"}),r;if(o=function(e){if(!ct(e)&&!Ct(e)&&!O(e))return"";let t="";try{t=String(e)}catch(e){}try{t=e.toString()}catch(e){}return t}(n.__sysToken__),!ua(n,"__sysInputArgs__"))return r.resolve({state:"error",msg:"invalid input"}),r;n=n.__sysInputArgs__;let a="",i=fi(o);if(a=Ft(i)?await i:i,ct(a)||(a=""),"getFuncList"===t){let e={state:"success",msg:rt(li)};return r.resolve(e),r}if(!ua(li,t))return r.resolve({state:"error",msg:`invalid func[${t}]`}),r;let s=li[t];try{let e=await qt(s)(a,...n);r.resolve(e)}catch(e){r.resolve({state:"error",msg:`無法識別func: ${t}`})}return r}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=fn(),n=je(e,"instWConverServer",null);if(null===n)return t.emit("error","invalid opt.instWConverServer"),t;fi=je(e,"cbGetUserIDFromToken",null),Lt(fi)||(fi=async()=>"");let r=je(e,"useDbORM",null);un(r)||(r=!0);let o=null;if(r&&(o=je(e,"operORM",null),!Lt(o)))return t.emit("error","invalid opt.operORM when useDbORM=true"),t;let a=[];if(r&&(a=je(e,"tableNames",null),!dt(a)))return t.emit("error","invalid opt.tableNames when useDbORM=true"),t;let i=[];r&&(i=je(e,"methods",null),dt(i)||(i=["select","insert","save","del"]));let s=je(e,"extFuncs",null),u=je(e,"hookBefores",null),c=je(e,"hookAfters",null),l={};return r&&(a=Lo(a),l=function(e,t,n){let r={};return st(e,(e=>{st(t,(t=>{r[`${e}.${t}`]=async function(r,o){return await n(r,e,t,o)}}))})),r}(a,i,o)),ft(s)&&st(s,((e,t)=>{l[t]=e})),li=l,n.on("execute",(async function(e,n,r){let o={func:e,input:n,pm:r};if(Lt(u))try{u(o)}catch(e){t.emit("error",e)}else gt(u)&&st(u,(e=>{if(Lt(e))try{e(o)}catch(e){t.emit("error",e)}}));let a=await pi(o).catch((e=>{t.emit("error",e)})),i=ci(ci({},o),{},{output:a});if(Lt(c))try{c(i)}catch(e){t.emit("error",e)}else gt(c)&&st(c,(e=>{if(Lt(e))try{e(i)}catch(e){t.emit("error",e)}}))})),t}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,n=null,r=fn(),o=je(e,"instWConverServer",null);if(null===o)return r.emit("error","invalid opt.instWConverServer"),r;let a=je(e,"useDbORM",null);un(a)||(a=!0);let i=je(e,"dbORMs",null),s=je(e,"operORM",null),u=je(e,"tableNamesExec",null),c=je(e,"methodsExec",null),l=je(e,"tableNamesSync",null),f=je(e,"cbGetUserIDFromToken",null),p=je(e,"extFuncs",null),d=je(e,"hookBefores",null),h=je(e,"hookAfters",null),m=je(e,"fnTableTags",null);if(t=new di({instWConverServer:o,cbGetUserIDFromToken:f,useDbORM:a,operORM:s,tableNames:u,methods:c,extFuncs:p,hookBefores:d,hookAfters:h}),t.on("error",(e=>{r.emit("error",e)})),a){if(!ft(i))return r.emit("error","invalid opt.dbORMs when useDbORM=true"),r;n=new oi({instWConverServer:o,dbORMs:i,tableNames:l,fnTableTags:m}),n.on("error",(e=>{r.emit("error",e)}))}return r.getInstWServWebdataServerExec=()=>t,r.getInstWServWebdataServerSync=()=>n,r}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,o=null,a=null,i=fn(),s=je(e,"port");xt(s)||(s=8080);let u=je(e,"useCors");un(u)||(u=!0);let c=je(e,"useInert");un(c)||(c=!0);let l=je(e,"pathStaticFiles");ct(l)||(l="dist");let f=je(e,"apis");gt(f)||(f=[]);let p=je(e,"getUserIDFromToken",null),d=je(e,"useDbORM",null);un(d)||(d=!0);let h=je(e,"dbORMs",null),m=je(e,"operORM",null),v=je(e,"tableNamesExec",null),y=je(e,"methodsExec",null),g=je(e,"tableNamesSync",null),b=je(e,"extFuncs",null),w=je(e,"hookBefores",null),j=je(e,"hookAfters",null),O=je(e,"fnTableTags",null),S=je(e,"showLog");un(S)||(S=!0);return(async()=>{await(async()=>{t=new n.Server({port:s,routes:{cors:u}}),c&&await t.register(r);let e=[];c&&(e=[{method:"GET",path:"/{file*}",handler:{directory:{path:`${l}/`}}}]),e=[...e,...f],t.route(e)})(),await(async()=>{o=new Ca({serverHapi:t}),o.on("open",(function(){S&&console.log(`Server[port:${s}]: open`)})),o.on("error",(function(e){S&&console.log(`Server[port:${s}]: error`,e),i.emit("error",{mode:"instWConverhpServer error",err:e})})),o.on("clientChange",(function(e){S&&console.log(`Server[port:${s}]: now clients: ${e}`)}))})(),await(async()=>{a=new hi({instWConverServer:o,cbGetUserIDFromToken:p,useDbORM:d,dbORMs:h,operORM:m,tableNamesExec:v,tableNamesSync:g,methodsExec:y,extFuncs:b,hookBefores:w,hookAfters:j,fnTableTags:O}),a.on("error",(e=>{S&&console.log("error",e),i.emit("error",{mode:"instWServWebdataServer error",err:e})}))})(),await t.start(),S&&console.log(`Server running at: ${t.info.uri}`)})(),process.on("unhandledRejection",(e=>{console.log("unhandledRejection",e),i.emit("error",{mode:"unhandledRejection",err:e})})),process.on("uncaughtException",(e=>{console.log("uncaughtException",e),i.emit("error",{mode:"uncaughtException",err:e})})),i.getServer=()=>t,i.getInstWConverhpServer=()=>o,i.getInstWServWebdataServer=()=>a,i}function vi(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(o);++r<o;)a[r]=e[r+t];return a}function yi(e){return e!=e}function gi(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}(e,yi,n)}var bi="\\ud800-\\udfff",wi="["+bi+"]",ji="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Oi="\\ud83c[\\udffb-\\udfff]",Si="[^"+bi+"]",Ai="(?:\\ud83c[\\udde6-\\uddff]){2}",Ti="[\\ud800-\\udbff][\\udc00-\\udfff]",Ii="(?:"+ji+"|"+Oi+")"+"?",Ei="[\\ufe0e\\ufe0f]?",_i=Ei+Ii+("(?:\\u200d(?:"+[Si,Ai,Ti].join("|")+")"+Ei+Ii+")*"),ki="(?:"+[Si+ji+"?",ji,Ai,Ti,wi].join("|")+")",Bi=RegExp(Oi+"(?="+Oi+")|"+ki+_i,"g");function Ni(e){return Ho(e)?function(e){return e.match(Bi)||[]}(e):function(e){return e.split("")}(e)}function Ci(e,t,n){if((e=ve(e))&&(n||void 0===t))return jt(e);if(!e||!(t=me(t)))return e;var r=Ni(e),o=Ni(t),a=function(e,t){for(var n=-1,r=e.length;++n<r&&gi(t,e[n],0)>-1;);return n}(r,o),i=function(e,t){for(var n=e.length;n--&&gi(t,e[n],0)>-1;);return n}(r,o)+1;return function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:vi(e,t,n)}(r,a,i).join("")}function Pi(e,t){let n=Yt();if(!dt(e)&&!ft(e))return n.reject("rs is not an array or object"),n;let r=!1;if(ft(e)){r=!0;let t=[];st(e,((e,n)=>{t.push({k:n,v:e})})),e=t}Lt(t)||(t=function(e){return e});let o=-1,a=[];return e.reduce((function(e,n){return e.then((function(e){a.push(e),o+=1;let i=o,s=n;return r&&(i=n.k,s=n.v),Lt(t)?t(s,i):s}))}),Promise.resolve()).then((function(e){var t,r,o,i;a.push(e),i=null==(t=a)?0:t.length,a=i?vi(t,(r=o||void 0===r?1:Nt(r))<0?0:r,i):[],n.resolve(a)})).catch((function(e){n.reject(e)})),n}let xi={backup:async function(e){return await Pi(e,(async(e,t)=>(console.log("backup...",t),{name:t,data:await e.select()})))},recover:async function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!on(e))throw console.log("fp",e),new Error("fp is not exist");if(!pt(n))throw console.log("woItems",n),new Error("invalid woItems");Lt(r)||(r=null),un(o)||(o=!1);let a=t.readFileSync(e,"utf8");a=Ci(a);let i=lt(a);Lt(r)&&r(),await Pi(i,(async e=>{console.log("recover...",e.name),o&&(console.log("needCreateStorage"),await n[e.name].createStorage());let t=null;return sa(e.data)>0&&(t=await n[e.name].insert(e.data)),t}))}};function Ri(){if(!Lt(ti))throw new Error("invalid dayjs");return ti().format("YYYY-MM-DDTHH:mm:ss.SSSZ")}let Di=null,$i=null;function Gi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"save";if(!pt(Di))throw console.log("ds",Di),new Error("invalid ds");let o=Di[e].keys,a=!1;dt(n)||(a=!0,n=[n]);let i=Ri();return r.indexOf("insert")>=0&&(o.indexOf("userId")>=0&&st(n,((e,r)=>{n[r].userId=t})),o.indexOf("timeCreate")>=0&&st(n,((e,t)=>{n[t].timeCreate=i}))),(r.indexOf("insert")>=0||r.indexOf("save")>=0)&&(o.indexOf("userIdUpdate")>=0&&st(n,((e,r)=>{n[r].userIdUpdate=t})),o.indexOf("timeUpdate")>=0&&st(n,((e,t)=>{n[t].timeUpdate=i}))),n=a?n[0]:n}async function Ui(e,t,n,r){let o,a=null;if(!pt($i))return Promise.reject("無有效woItems");let i=je($i,t,null);if(null===i)return Promise.reject(`ORM找不到表名稱: ${t}`);if("select"===n){if(o=await i.select(r).catch((e=>{console.log(`${t}.select catch`,e),a="取得資料失敗"})),ct(a))return Promise.reject(a)}else if("insert"===n||"save"===n){try{r=Gi(t,e,r,n)}catch(e){return console.log("adjustData catch",e.toString()),a="調整資料失敗",Promise.reject(a)}if("insert"===n?o=await i.insert(r).catch((e=>{console.log(`${t}.save catch`,e),a="新增資料失敗"})):"save"===n&&(o=await i.save(r,{atomic:!0}).catch((e=>{console.log(`${t}.save catch`,e),a="儲存資料失敗"}))),ct(a))return Promise.reject(a);o=dt(r)?kr(r,(e=>({id:e.id}))):{id:r.id}}else if("del"===n)o=await i.del(r).catch((e=>{console.log(`${t}.del catch`,e),a="刪除資料失敗"}));else if("delAll"===n)o=await i.delAll(r).catch((e=>{console.log(`${t}.delAll catch`,e),a="刪除資料失敗"}));else if("mix"===n){if(!pt(r))return Promise.reject("mix僅支援輸入ltdtDiffByKey結果物件");let n;o=[];let s=je(r,"add",[]);if(sa(s)>0){try{s=Gi(t,e,s,"insert+save")}catch(e){return console.log("adjustData catch",e.toString()),a="調整資料失敗",Promise.reject(a)}if(await i.insert(s).catch((e=>{console.log(`${t}.save catch`,e),a="新增資料失敗"})),ct(a))return Promise.reject(a);n=kr(s,(e=>({id:e.id}))),o=[...o,...n]}let u=je(r,"del",[]);if(sa(u)>0){if(await i.del(u).catch((e=>{console.log(`${t}.save catch`,e),a="刪除資料失敗"})),ct(a))return Promise.reject(a);n=kr(u,(e=>({id:e.id}))),o=[...o,...n]}let c=je(r,"diff",[]);if(sa(c)>0){try{c=Gi(t,e,c)}catch(e){return console.log("adjustData catch",e.toString()),a="調整資料失敗",Promise.reject(a)}if(await i.save(c).catch((e=>{console.log(`${t}.save catch`,e),a="變更資料失敗"})),ct(a))return Promise.reject(a);n=kr(c,(e=>({id:e.id}))),o=[...o,...n]}}else a=`invalid mode: ${n}`;return ct(a)?Promise.reject(a):o}function Mi(e,t){return Di=e,$i=t,Ui}function Li(e,t){var n=[];return at(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function Fi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!dt(e)){let e=Yt();return e.reject("pms is not an array"),e}return e.reduce(((e,t)=>e.then(t)),Promise.resolve(t))}let Wi=[],zi=[],Hi=[],Yi=null,qi=null,Ji=!0,Vi=!0;function Zi(e){setTimeout((()=>{Wi.push(e)}),1)}function Xi(e){setTimeout((()=>{zi.push(e)}),1)}function Ki(e){setTimeout((()=>{Hi.push(e)}),1)}async function Qi(e,t,n,r){if(!Lt(Yi))return Promise.reject("invalid mapOrm");if(Ji&&!ct(e))return console.log("userId",e),console.log("找不到使用者主鍵"),Promise.reject("找不到使用者主鍵");let o="n";if(Ji){if(!Lt(qi))return Promise.reject("invalid getUserById");let t=await qi(e);if(!t)return console.log("userId",e),console.log("找不到使用者資訊"),Promise.reject("找不到使用者資訊");o=je(t,"isAdmin"),"y"!==o&&"n"!==o&&(o="n");let n=je(t,"isActive");if("y"!==n&&"n"!==n&&(n="n"),"y"!==n)return console.log("userId",e),console.log("oSelf",t),console.log("使用者被停權或無有效使用者資訊"),Promise.reject("使用者被停權或無有效使用者資訊")}if(await Pi(Wi,(a=>a({woName:t,userId:e,isAdmin:o,mode:n,input:r}))),sa(zi)>0){let a={woName:t,userId:e,isAdmin:o,mode:n,input:r},i=await Fi(zi,a);r=i.input}let a=await Yi(e,t,n,r);var s,u;return Vi&&"n"===o&&"select"===n&&dt(a)&&(u=e=>!(ua(e,"isActive")&&"n"===e.isActive),a=(i(s=a)?Un:Li)(s,Er(u))),sa(Hi)>0&&(a=await Fi(Hi,{woName:t,userId:e,isAdmin:o,mode:n,input:r,output:a})),a}function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(Object(n),!0).forEach((function(t){si(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ns(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=function(e,t,n,r){if(!pt(e))throw console.log("ds",e),new Error("invalid ds");if(!Lt(t))throw console.log("WOrm",t),new Error("invalid WOrm");if(!ct(n))throw console.log("url",n),new Error("invalid url");if(!ct(r))throw console.log("db",r),new Error("invalid db");let o={};return st(rt(e),(e=>{let a=new t({url:n,db:r,cl:e});o[e]=a})),o}(e,t,n,r),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Lt(e)?(Yi=e,Ji=je(t,"bCheckUser"),un(Ji)||(Ji=!0),qi=je(t,"getUserById"),Vi=je(t,"bExcludeWhenNotAdmin"),un(Vi)||(Vi=!0),{addFunCheck:Zi,addFunPreProcessing:Xi,addFunPostProcessing:Ki,procOrm:Qi}):Promise.reject("invalid mapOrm")}(Mi(e,a),o);return ts(ts({},xi),{},{woItems:a},i)}function rs(e){return e.indexOf("\\\\")>=0?"```"+e+"```":e}function os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?os(Object(n),!0).forEach((function(t){si(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let is={id:{pk:!0,name:"主鍵",type:"STRING"},order:{name:"順序",type:"INTEGER"},name:{name:"名稱",type:"STRING"},description:{name:"說明",type:"TEXT"},url:{name:"網址",type:"STRING"},method:{name:"方法",type:"STRING"},version:{name:"版本",type:"STRING"},group:{name:"群組",type:"STRING"},levels:{name:"階層群組",type:"STRING"},keywords:{name:"關鍵字",type:"STRING"},state:{name:"狀態",type:"STRING"},creator:{name:"創建者",type:"STRING"},dataSource:{name:"資料提供者",type:"STRING"},tokens:{name:"金鑰",type:"TEXT"},mdInputParams:{name:"輸入參數md說明",type:"STRING"},inputExample:{name:"輸入範例",type:"STRING"},mdOutputParams:{name:"輸出資料md說明",type:"STRING"},outputExample:{name:"輸出範例",type:"STRING"},timeCreate:{name:"創建時間",type:"STRING"},timeUpdate:{name:"更新時間",type:"STRING"},isActive:{name:"是否有效",type:"STRING"}},ss=function(){let e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!gt(t))return{};let r={};return st(t,(function(t){r[t]=je(e,t,n)})),r}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},rt(is));return e.id=`${function(){if(!Lt(ti))throw new Error("invalid dayjs");return ti().format("YYYYMMDDHHmmss")}()}-${Ra()}`,e.timeCreate=Ri(),e.timeUpdate=e.timeCreate,e.isActive="y",e};function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(Object(n),!0).forEach((function(t){si(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ls(e){let t=je(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"useCreateStorage");un(t)||(t=!1);let{keyTable:n,tableNameCht:r,tableNameEng:o,settings:a,parser:i,funNew:s,funTest:u,ext:c}=e;if(!ct(n))throw new Error(`invalid keyTable[${n}]`);if(ct(r)||(r=n),ct(o)||(o=n),!pt(a))throw new Error("invalid settings");pt(c)||(c=null),pt(i)||(i=null),Lt(s)||(s=null);let l=null;Lt(u)&&(l=async e=>{if(!pt(e))throw new Error("invalid wo");if(!ua(e,n))throw console.log(e),new Error(`keyTable[${n}] is not in wo`);let r=[];try{r=u(),Ft(r)&&(r=await r)}catch(e){throw console.log(`keyTable[${n}] funTest catch`,e),new Error(e)}if(0!==sa(r))return t&&await e[n].createStorage(),await e[n].save(r),r});let f={},p={};return st(rt(a),(e=>{let t=je(a,`${e}.name`,"");ct(t)&&(f[e]=t);let n=je(a,`${e}.type`,"");ct(n)&&(p[e]=n)})),cs(cs({},e),{},{keyTable:n,tableNameCht:r,tableNameEng:o,settings:a,keys:rt(a),kpType:p,kpHead:f,parser:i,funNew:s,funTest:u,funTestAndSave:l,ext:c})}let fs={apis:{keyTable:"apis",tableNameCht:"APIs",tableNameEng:"APIs",settings:is,funNew:ss,funTest:()=>{let e=kr([{id:"id-for-apis-sys-1",name:"取得API清單",description:"API管理中心取得API清單資訊",url:"http://localhost:11005/getAPIsList",method:"get",version:"v1",group:"全部",levels:"API",keywords:"API;center",state:"ok",creator:"apis-system",dataSource:"apis-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-pets-1",name:"取得寵物清單",description:"寵物管理中心取得寵物清單資訊",url:"http://localhost:11005/getPetsList",method:"get",version:"v1",group:"寵物",levels:"寵物",keywords:"pets",state:"ok",creator:"pets-system",dataSource:"pets-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-pets-dogs-1",name:"取得狗狗清單",description:"取得狗狗清單資訊",url:"http://localhost:11005/getDogsList",method:"get",version:"v1",group:"寵物",levels:"寵物.狗狗",keywords:"pets;dogs",state:"ok",creator:"pets-system",dataSource:"pets-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-pets-dogs-2",name:"新增狗狗資訊",description:"新增狗狗資訊",url:"http://localhost:11005/addDog",method:"post",version:"v1",group:"寵物",levels:"寵物.狗狗",keywords:"pets;dogs",state:"ok",creator:"pets-system",dataSource:"pets-data",mdInputParams:"### POST參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-pets-dogs-3",name:"變更狗狗資訊",description:"變更狗狗資訊",url:"http://localhost:11005/updateDog",method:"put",version:"v1",group:"寵物",levels:"寵物.狗狗",keywords:"pets;dogs",state:"ok",creator:"pets-system",dataSource:"pets-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-pets-dogs-4",name:"刪除狗狗資訊",description:"刪除狗狗資訊",url:"http://localhost:11005/deleteDog",method:"del",version:"v1",group:"寵物",levels:"寵物.狗狗",keywords:"pets;dogs",state:"ok",creator:"pets-system",dataSource:"pets-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-pets-cats-1",name:"取得貓咪清單",description:"取得貓咪清單資訊",url:"http://localhost:11005/getCatsList",method:"get",version:"v1",group:"寵物",levels:"寵物.貓咪",keywords:"pets;cats",state:"ok",creator:"pets-system",dataSource:"pets-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-pets-cats-2",name:"新增貓咪資訊",description:"新增貓咪資訊",url:"http://localhost:11005/addCat",method:"post",version:"v1",group:"寵物",levels:"寵物.貓咪",keywords:"pets;cats",state:"ok",creator:"pets-system",dataSource:"pets-data",mdInputParams:"### POST參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-pets-cats-3",name:"變更貓咪資訊",description:"變更貓咪資訊",url:"http://localhost:11005/updateCat",method:"put",version:"v1",group:"寵物",levels:"寵物.貓咪",keywords:"pets;cats",state:"ok",creator:"pets-system",dataSource:"pets-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-pets-cats-4",name:"刪除貓咪資訊",description:"刪除貓咪資訊",url:"http://localhost:11005/deleteCat",method:"del",version:"v1",group:"寵物",levels:"寵物.貓咪",keywords:"pets;cats",state:"ok",creator:"pets-system",dataSource:"pets-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-vehicles-cars-1",name:"取得汽車清單",description:"取得汽車清單資訊",url:"http://localhost:11005/getcarsList",method:"get",version:"v1",group:"寵物",levels:"交通工具.汽車",keywords:"vehicles;cars",state:"ok",creator:"vehicles-system",dataSource:"vehicles-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-vehicles-cars-2",name:"新增汽車資訊",description:"新增汽車資訊",url:"http://localhost:11005/addDog",method:"post",version:"v1",group:"寵物",levels:"交通工具.汽車",keywords:"vehicles;cars",state:"ok",creator:"vehicles-system",dataSource:"vehicles-data",mdInputParams:"### POST參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-vehicles-cars-3",name:"變更汽車資訊",description:"變更汽車資訊",url:"http://localhost:11005/updateDog",method:"put",version:"v1",group:"寵物",levels:"交通工具.汽車",keywords:"vehicles;cars",state:"ok",creator:"vehicles-system",dataSource:"vehicles-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '},{id:"id-for-apis-vehicles-cars-4",name:"刪除汽車資訊",description:"刪除汽車資訊",url:"http://localhost:11005/deleteDog",method:"del",version:"v1",group:"寵物",levels:"交通工具.汽車",keywords:"vehicles;cars",state:"ok",creator:"vehicles-system",dataSource:"vehicles-data",mdInputParams:"### GET網址參數\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| token | STRING | key-for-token |\n| id | STRING | id-for-test |\n| paramA | INTEGER | 123 |\n| paramB | DOUBLE | 123.456 |\n            ",inputExample:"http://localhost:11005/getAPIsList?token={token}&id={id}&paramA=123&paramB=123.456",mdOutputParams:`### 回傳數據欄位: Array of objects\n| 參數 | 型別 | 範例 |\n| -- | -- | -- |\n| id | STRING | id-for-test |\n| weight | DOUBLE | 12.3 |\n| color | STRING | #f26 |\n| paramA | INTEGER | 321 |\n| paramB | DOUBLE | 654.321 |\n| paramC | STRING | ${rs("C:\\\\pj\\abc\\filename.pdf")} |\n            `,outputExample:'\n[\n    {\n        "id": "id-for-test-1",\n        "weight": 12.3,\n        "color": "#f26",\n        "paramA": 101,\n        "paramB": 0.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename1.pdf"\n    },\n    {\n        "id": "id-for-test-2",\n        "weight": 22.3,\n        "color": "#2f6",\n        "paramA": 102,\n        "paramB": 1.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename2.pdf"\n    },\n    {\n        "id": "id-for-test-3",\n        "weight": 32.3,\n        "color": "#26f",\n        "paramA": 103,\n        "paramB": 2.01,\n        "paramC": "C:\\\\\\\\pj\\\\abc\\\\filename3.pdf"\n    }\n]\n            '}],((e,t)=>{let n=ss(as(as({},e),{},{order:t}));return n.id=e.id,ct(e.timeUpdate)&&(n.timeUpdate=e.timeUpdate),n=function(e,t){if(!ft(e))return{};if(!gt(t))return{};let n={};return st(t,(function(t){ua(e,t)&&(n[t]=je(e,t))})),n}(n,rt(is)),n}));return console.log("已產生: {keyTable} 測試資料",e),e}}},ps={};for(let e in fs)ps[e]=ls(fs[e],{useCreateStorage:!1});return function(n,r,o,a,i,s){let u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=null;if(!Lt(n))throw console.log("invalid WOrm",n),new Error("invalid WOrm");if(!ct(r))throw console.log("invalid url",r),new Error("invalid url");if(!ct(o))throw console.log("invalid db",o),new Error("invalid db");if(!Lt(a))throw console.log("invalid getUserByToken",a),new Error("invalid getUserByToken");if(!Lt(i))throw console.log("invalid verifyBrowserUser",i),new Error("invalid verifyBrowserUser");if(!Lt(s))throw console.log("invalid verifyAppUser",s),new Error("invalid verifyAppUser");let l=je(u,"serverPort");Mt(l)||(l=11005),l=Ut(l);let f=je(u,"bCheckUser",!1),p=je(u,"getUserById",null),d=je(u,"bExcludeWhenNotAdmin",!1),h=je(u,"webName",{}),m=je(u,"webDescription",{}),v=je(u,"webLogo",""),y=je(u,"subfolder","");var g,b;ct(y)&&("/"===Ht(y,1)&&(b=1,y=ct(g=y)&&Wt(b)?0===(b=Ut(b))?g:zt(g,g.length-b):""),"/"!==zt(y,1)&&(y=`/${y}`));let w=je(u,"urlRedirect",""),j={bCheckUser:f,getUserById:p,bExcludeWhenNotAdmin:d},O={};try{O=ns(ps,n,r,o,j)}catch(e){console.log(e)}let{woItems:S,procOrm:A}=O,T=e=>({webName:h,webDescription:m,webLogo:v}),I=async e=>{let t=a(e);return Ft(t)&&(t=await t),pt(t)?t:(console.log("token",e),console.log("can not find the user from token"),Promise.reject("can not find the user from token"))},E=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=await I(e),r=i(n,t);return Ft(r)&&(r=await r),r?n:(console.log("userSelf",n),console.log("user does not have permission"),Promise.reject("user does not have permission"))},_=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await S.apis.select(e)},k=async e=>{let t=je(e,"payload");if(ct(t)&&(t=lt(t)),!pt(t))return console.log("inp",t),console.log("invalid inp from req"),Promise.reject("invalid inp from req");let n=je(t,"group","");if(!ct(n))return console.log("inp",t),console.log("group",n),console.log("invalid group from inp"),Promise.reject("invalid group from inp");let r=je(t,"apis",[]);return gt(r)?(st(r,((e,t)=>{st(e,((e,n)=>{ct(e)&&"base64:"===zt(e,7)&&(e=function(e,t){return ct(e)&&Wt(t)?0===(t=Ut(t))?e:Ht(e,e.length-t):""}(e,7),e=rn(e),r[t][n]=e)}))})),st(r,((e,t)=>{r[t].group=n})),t={group:n,apis:r},t):(console.log("inp",t),console.log("apis",r),console.log("invalid apis from inp"),Promise.reject("invalid apis from inp"))},B="dist",N="./node_modules/w-web-api/dist";var C;C=N,!t.existsSync(C)||t.lstatSync(C).isFile()||t.lstatSync(C).isSymbolicLink()||(B=N);let P="index.html";try{let n=e.resolve(B,"index.tmp");if(on(n)||(n=e.resolve(B,P)),!on(n))throw console.log("fpEntryIn",n),new Error("invalid fpEntryIn");let r=e.resolve(B,P),o=t.readFileSync(n,"utf8");o=an(o,"/mapi/","{sfd}/"),o=an(o,"{sfd}",y),o=an(o,"{urlRedirect}",w),t.writeFileSync(r,o,"utf8")}catch(e){console.log(e),console.log(`can not generate ${P}`)}let x=[{method:"GET",path:"/getWebInfor",handler:async function(e,t){return T()}},{method:"GET",path:"/api/getUserByToken",handler:async function(e,t){return await qt((async function(){let t=je(e,"query.token",""),n=await E(t,"getUserByToken");return pt(n)?n:(console.log("token",t),console.log("[API]getUserByToken/check user: invalid user"),console.log("token does not have permission"),Promise.reject("token does not have permission"))}))()}},{method:"GET",path:"/getAPIsList",handler:async function(e,t){return await qt((async function(){let t=je(e,"query.token","");return pt(await E(t,"getAPIsList"))?await _({isActive:"y"}):(console.log("token",t),console.log("[API]getAPIsList/check user: invalid user"),console.log("token does not have permission"),Promise.reject("token does not have permission"))}))()}},{method:"POST",path:"/updateAPIs",handler:async function(e,t){let n=await qt((async function(){let t=je(e,"query.token","");if(!pt(await E(t,"updateAPIs")))return console.log("token",t),console.log("[API]updateAPIs/check user: invalid user"),console.log("token does not have permission"),Promise.reject("token does not have permission");let n=await k(e),r=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{apis:t}=e;return await S.apis.save(t)}(n);return r}))();return n}},{method:"POST",path:"/syncAndReplaceApis",handler:async function(e,t){let n=await qt((async function(){let t=je(e,"query.token",""),n=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=await I(e),r=s(n,t);return Ft(r)&&(r=await r),r?n:(console.log("userSelf",n),console.log("user does not have permission"),Promise.reject("user does not have permission"))}(t,"syncAndReplaceApis");if(!pt(n))return console.log("token",t),console.log("[API]syncAndReplaceApis/check user: invalid user"),console.log("token does not have permission"),Promise.reject("token does not have permission");let r=await k(e),o=await(async e=>{let t=je(e,"group","");if(!ct(t))return console.log("params",e),console.log("group",t),console.log("invalid group"),Promise.reject("invalid group");let n=je(e,"apis",[]);return gt(n)?(await S.apis.delAll({group:t}),await S.apis.insert(n)):(console.log("params",e),console.log("apis",n),console.log("invalid apis"),Promise.reject("invalid apis"))})(r);return o}))();return n}}],R=rt(ps),D=R;return c=new mi({port:u.serverPort,pathStaticFiles:B,apis:x,getUserIDFromToken:async e=>"",useDbORM:!0,dbORMs:S,operORM:A,tableNamesExec:R,methodsExec:["select","insert","save","del"],tableNamesSync:D,extFuncs:{getWebInfor:T,getAPIsList:function(e){return _(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},hookBefores:null,hookAfters:null,fnTableTags:"tableTags-web-api.json"}),c}}));
//# sourceMappingURL=w-web-api.umd.js.map
